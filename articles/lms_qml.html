<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>LMS and QML approaches • modsem</title>
<script src="../deps/jquery-3.6.1/jquery-3.6.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="LMS and QML approaches">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">modsem</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/modsem.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/customizing.html">customizing interaction terms</a></li>
    <li><a class="dropdown-item" href="../articles/interaction_two_etas.html">interaction effects between endogenous variables</a></li>
    <li><a class="dropdown-item" href="../articles/lavaan.html">using lavaan functions</a></li>
    <li><a class="dropdown-item" href="../articles/lms_qml.html">LMS and QML approaches</a></li>
    <li><a class="dropdown-item" href="../articles/methods.html">methods</a></li>
    <li><a class="dropdown-item" href="../articles/observed_lms_qml.html">observed variables in the LMS- and QML approach</a></li>
    <li><a class="dropdown-item" href="../articles/plot_interactions.html">plotting interaction effects</a></li>
    <li><a class="dropdown-item" href="../articles/quadratic.html">quadratic effects</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Kss2k/modsem/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>LMS and QML approaches</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Kss2k/modsem/blob/push-to-gh-pages/vignettes/lms_qml.Rmd" class="external-link"><code>vignettes/lms_qml.Rmd</code></a></small>
      <div class="d-none name"><code>lms_qml.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Kss2k/modsem" class="external-link">modsem</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="the-latent-moderated-structural-equations-lms-and-the-quasi-maximum-likelihood-qml-approach">The Latent Moderated Structural Equations (LMS) and the Quasi
Maximum Likelihood (QML) approach<a class="anchor" aria-label="anchor" href="#the-latent-moderated-structural-equations-lms-and-the-quasi-maximum-likelihood-qml-approach"></a>
</h2>
<p>Both the LMS- and QML approach works on most models, but interaction
effects with endogenous can be a bit tricky to estimate (see the <a href="https://kss2k.github.io/modsem/articles/interaction_two_etas.html" class="external-link">vignette</a>.
Both approaches (particularily the LMS approach) are quite
computationally intensive, and are thus partly implemented in C++ (using
Rcpp and RcppArmadillo). Additionally starting parameters are estimated
using the double centering approach (and the means of the observed
variables) are used to generate good starting parameters for faster
convergence. If you want to see the progress of the estimation process
you can use ´verbose = TRUE´.</p>
<div class="section level3">
<h3 id="a-simple-example">A Simple Example<a class="anchor" aria-label="anchor" href="#a-simple-example"></a>
</h3>
<p>Here you can see an example of the LMS approach for a simple model.
By default the summary function calculates fit measures compared to a
null model (i.e., the same model without an interaction term).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Kss2k/modsem" class="external-link">modsem</a></span><span class="op">)</span></span>
<span><span class="va">m1</span> <span class="op">&lt;-</span> <span class="st">'</span></span>
<span><span class="st"># Outer Model</span></span>
<span><span class="st">  X =~ x1</span></span>
<span><span class="st">  X =~ x2 + x3</span></span>
<span><span class="st">  Z =~ z1 + z2 + z3</span></span>
<span><span class="st">  Y =~ y1 + y2 + y3</span></span>
<span><span class="st"></span></span>
<span><span class="st"># Inner model</span></span>
<span><span class="st">  Y ~ X + Z</span></span>
<span><span class="st">  Y ~ X:Z</span></span>
<span><span class="st">'</span></span>
<span></span>
<span><span class="va">lms1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modsem.html">modsem</a></span><span class="op">(</span><span class="va">m1</span>, <span class="va">oneInt</span>, method <span class="op">=</span> <span class="st">"lms"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">lms1</span>, standardized <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># standardized estimates </span></span></code></pre></div>
<p>Here you can see the same example using the QML approach.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">qml1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modsem.html">modsem</a></span><span class="op">(</span><span class="va">m1</span>, <span class="va">oneInt</span>, method <span class="op">=</span> <span class="st">"qml"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">qml1</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="a-more-complicated-example">A more complicated example<a class="anchor" aria-label="anchor" href="#a-more-complicated-example"></a>
</h3>
<p>Here you can see an example of a more complicated example using the
model from the theory of planned behaviour (TPB), where there are two
endogenous variables, where there is an interaction between an
endogenous and exogenous variable. When estimating more complicated
models with the LMS-approach, it is recommended that you increase the
number of nodes used for numerical integration. By default the number of
nodes is set to 16, and can be increased using the nodes argument. The
argument has no effect on the QML approach. When there is an interaction
effect between an endogenous and exogenous variable, it is recommended
that you use at least 32 nodes for the LMS-approach. You can also get
robust standard errors by setting <code>robust.se = TRUE</code> in the
<code><a href="../reference/modsem.html">modsem()</a></code> function.</p>
<p>Note: If you want the lms-approach to give as similar results as
possible to mplus, you would have to increase the number of nodes (e.g.,
<code>nodes = 100</code>).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ATT = Attitude, </span></span>
<span><span class="co"># PBC = Perceived Behavioural Control </span></span>
<span><span class="co"># INT = Intention </span></span>
<span><span class="co"># SN = Subjective Norms</span></span>
<span><span class="co"># BEH = Behaviour</span></span>
<span><span class="va">tpb</span> <span class="op">&lt;-</span> <span class="st">' </span></span>
<span><span class="st"># Outer Model (Based on Hagger et al., 2007)</span></span>
<span><span class="st">  ATT =~ att1 + att2 + att3 + att4 + att5</span></span>
<span><span class="st">  SN =~ sn1 + sn2</span></span>
<span><span class="st">  PBC =~ pbc1 + pbc2 + pbc3</span></span>
<span><span class="st">  INT =~ int1 + int2 + int3</span></span>
<span><span class="st">  BEH =~ b1 + b2</span></span>
<span><span class="st"></span></span>
<span><span class="st"># Inner Model (Based on Steinmetz et al., 2011)</span></span>
<span><span class="st">  INT ~ ATT + SN + PBC</span></span>
<span><span class="st">  BEH ~ INT + PBC </span></span>
<span><span class="st">  BEH ~ INT:PBC  </span></span>
<span><span class="st">'</span></span>
<span></span>
<span><span class="va">lms2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modsem.html">modsem</a></span><span class="op">(</span><span class="va">tpb</span>, <span class="va">TPB</span>, method <span class="op">=</span> <span class="st">"lms"</span>, nodes <span class="op">=</span> <span class="fl">32</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">lms2</span><span class="op">)</span></span>
<span></span>
<span><span class="va">qml2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modsem.html">modsem</a></span><span class="op">(</span><span class="va">tpb</span>, <span class="va">TPB</span>, method <span class="op">=</span> <span class="st">"qml"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">qml2</span>, standardized <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># standardized estimates</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Kjell Solem Slupphaug.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
