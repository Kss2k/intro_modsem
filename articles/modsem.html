<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>modsem • modsem</title>
<script src="../deps/jquery-3.6.1/jquery-3.6.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="modsem">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">modsem</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/modsem.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/customizing.html">customizing interaction terms</a></li>
    <li><a class="dropdown-item" href="../articles/interaction_two_etas.html">interaction effects between endogenous variables</a></li>
    <li><a class="dropdown-item" href="../articles/lavaan.html">using lavaan functions</a></li>
    <li><a class="dropdown-item" href="../articles/lms_qml.html">LMS and QML approaches</a></li>
    <li><a class="dropdown-item" href="../articles/methods.html">methods</a></li>
    <li><a class="dropdown-item" href="../articles/observed_lms_qml.html">observed variables in the LMS- and QML approach</a></li>
    <li><a class="dropdown-item" href="../articles/plot_interactions.html">plotting interaction effects</a></li>
    <li><a class="dropdown-item" href="../articles/quadratic.html">quadratic effects</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Kss2k/modsem/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>modsem</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Kss2k/modsem/blob/push-to-gh-pages/vignettes/modsem.Rmd" class="external-link"><code>vignettes/modsem.Rmd</code></a></small>
      <div class="d-none name"><code>modsem.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Kss2k/modsem" class="external-link">modsem</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="the-basic-syntax">The Basic Syntax<a class="anchor" aria-label="anchor" href="#the-basic-syntax"></a>
</h2>
<p>modsem basically introduces a new feature to the lavaan-syntax – the
semicolon operator (“:”). The semicolon operator works the same way as
in the lm()-function. In order to specify an interaction effect between
two variables, you join them by Var1:Var2, Models can either be
estimated using the one of the product indicator approaches (“ca”,
“rca”, “dblcent”, “pind”) or by using the latent moderated structural
equations approach (“lms”), or the quasi maximum likelihood approach
(“qml”). The product indicator approaches are estimated via lavaan,
whilst the lms and qml approaches are estimated via modsem itself.</p>
<div class="section level3">
<h3 id="a-simple-example">A Simple Example<a class="anchor" aria-label="anchor" href="#a-simple-example"></a>
</h3>
<p>Here we can see a simple example of how to specify an interaction
effect between two latent variables in lavaan.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m1</span> <span class="op">&lt;-</span> <span class="st">'</span></span>
<span><span class="st">  # Outer Model</span></span>
<span><span class="st">  X =~ x1 + x2 +x3</span></span>
<span><span class="st">  Y =~ y1 + y2 + y3</span></span>
<span><span class="st">  Z =~ z1 + z2 + z3</span></span>
<span><span class="st">  </span></span>
<span><span class="st">  # Inner model</span></span>
<span><span class="st">  Y ~ X + Z + X:Z </span></span>
<span><span class="st">'</span></span>
<span></span>
<span><span class="va">est1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modsem.html">modsem</a></span><span class="op">(</span><span class="va">m1</span>, <span class="va">oneInt</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">est1</span><span class="op">)</span></span></code></pre></div>
<p>By default the model is estimated using the “dblcent” method. If you
want to use another method, but the method can be changed using the
method argument.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">est1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modsem.html">modsem</a></span><span class="op">(</span><span class="va">m1</span>, <span class="va">oneInt</span>, method <span class="op">=</span> <span class="st">"lms"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">est1</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="interactions-between-two-observed-variables">Interactions Between two Observed Variables<a class="anchor" aria-label="anchor" href="#interactions-between-two-observed-variables"></a>
</h3>
<p>modsem does not only allow you to estimate interactions between
latent variables, but also interactions between observed variables. Here
we first run a regression with only observed variables, where there is
an interaction between x1 and z2, and then run an equivalent model using
modsem().</p>
<p><strong>Regression</strong></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">reg1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">y1</span> <span class="op">~</span> <span class="va">x1</span><span class="op">*</span><span class="va">z1</span>, <span class="va">oneInt</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">reg1</span><span class="op">)</span></span></code></pre></div>
<p><strong>Using modsem()</strong> In general, when you have
interactions between observed variables it is recommended that you use
method = “pind”. Interaction effects with observed variables is not
supported by the LMS- and QML-approach. In certain circumstances, you
can define a latent variabale with a single indicator to estimate the
interaction effect between two observed variables, in the LMS and QML
approach, but it is generally not recommended.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Here we use "pind" as the method (see chapter 3)</span></span>
<span><span class="va">est2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modsem.html">modsem</a></span><span class="op">(</span><span class="st">'y1 ~ x1 + z1 + x1:z1'</span>, data <span class="op">=</span> <span class="va">oneInt</span>, method <span class="op">=</span> <span class="st">"pind"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">est2</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="interactions-between-latent-and-observed-variables">Interactions between Latent and Observed Variables<a class="anchor" aria-label="anchor" href="#interactions-between-latent-and-observed-variables"></a>
</h3>
<p>modsem also allows you to estimate interaction effects between latent
and observed variables. To do so, you just join a latent and an observed
variable by a colon, e.g., ‘latent:observer’. As with interactions
between observed variables, it is generally recommended that you use
method = “pind” for estimating the effect between observed x latent</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m3</span> <span class="op">&lt;-</span> <span class="st">'</span></span>
<span><span class="st">  # Outer Model</span></span>
<span><span class="st">  X =~ x1 + x2 +x3</span></span>
<span><span class="st">  Y =~ y1 + y2 + y3</span></span>
<span><span class="st">  </span></span>
<span><span class="st">  # Inner model</span></span>
<span><span class="st">  Y ~ X + z1 + X:z1 </span></span>
<span><span class="st">'</span></span>
<span></span>
<span><span class="va">est3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modsem.html">modsem</a></span><span class="op">(</span><span class="va">m3</span>, <span class="va">oneInt</span>, method <span class="op">=</span> <span class="st">"pind"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">est3</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="quadratic-effects">Quadratic Effects<a class="anchor" aria-label="anchor" href="#quadratic-effects"></a>
</h3>
<p>In essence, quadratic effects are just a special case of interaction
effects. Thus modsem can also be used to estimate quadratic effects.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">m4</span> <span class="op">&lt;-</span> <span class="st">'</span></span>
<span><span class="st"># Outer Model</span></span>
<span><span class="st">X =~ x1 + x2 + x3</span></span>
<span><span class="st">Y =~ y1 + y2 + y3</span></span>
<span><span class="st">Z =~ z1 + z2 + z3</span></span>
<span><span class="st"></span></span>
<span><span class="st"># Inner model</span></span>
<span><span class="st">Y ~ X + Z + Z:X + X:X</span></span>
<span><span class="st">'</span></span>
<span></span>
<span><span class="va">est4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modsem.html">modsem</a></span><span class="op">(</span><span class="va">m4</span>, <span class="va">oneInt</span>, <span class="st">"qml"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">est4</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="more-complicated-examples">More Complicated Examples<a class="anchor" aria-label="anchor" href="#more-complicated-examples"></a>
</h3>
<p>Here we can see a more complicated example using the model for the
theory of planned behaviour.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">tpb</span> <span class="op">&lt;-</span> <span class="st">' </span></span>
<span><span class="st"># Outer Model (Based on Hagger et al., 2007)</span></span>
<span><span class="st">  ATT =~ att1 + att2 + att3 + att4 + att5</span></span>
<span><span class="st">  SN =~ sn1 + sn2</span></span>
<span><span class="st">  PBC =~ pbc1 + pbc2 + pbc3</span></span>
<span><span class="st">  INT =~ int1 + int2 + int3</span></span>
<span><span class="st">  BEH =~ b1 + b2</span></span>
<span><span class="st"></span></span>
<span><span class="st"># Inner Model (Based on Steinmetz et al., 2011)</span></span>
<span><span class="st">  INT ~ ATT + SN + PBC</span></span>
<span><span class="st">  BEH ~ INT + PBC + INT:PBC  </span></span>
<span><span class="st">'</span></span>
<span><span class="co"># the double centering apporach</span></span>
<span><span class="va">est_tpb</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modsem.html">modsem</a></span><span class="op">(</span><span class="va">tpb</span>, <span class="va">TPB</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># using the lms approach</span></span>
<span><span class="va">est_tpb_lms</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modsem.html">modsem</a></span><span class="op">(</span><span class="va">tpb</span>, <span class="va">TPB</span>, method <span class="op">=</span> <span class="st">"lms"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">est_tpb_lms</span><span class="op">)</span></span></code></pre></div>
<p>Here is an example included two quadratic- and one interaction
effect, using the included dataset <code>jordan</code>. The dataset is
subset of the PISA 2006 dataset.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m2</span> <span class="op">&lt;-</span> <span class="st">'</span></span>
<span><span class="st">ENJ =~ enjoy1 + enjoy2 + enjoy3 + enjoy4 + enjoy5</span></span>
<span><span class="st">CAREER =~ career1 + career2 + career3 + career4</span></span>
<span><span class="st">SC =~ academic1 + academic2 + academic3 + academic4 + academic5 + academic6</span></span>
<span><span class="st">CAREER ~ ENJ + SC + ENJ:ENJ + SC:SC + ENJ:SC</span></span>
<span><span class="st">'</span></span>
<span></span>
<span><span class="va">est_jordan</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modsem.html">modsem</a></span><span class="op">(</span><span class="va">m2</span>, data <span class="op">=</span> <span class="va">jordan</span><span class="op">)</span></span>
<span><span class="va">est_jordan_qml</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modsem.html">modsem</a></span><span class="op">(</span><span class="va">m2</span>, data <span class="op">=</span> <span class="va">jordan</span>, method <span class="op">=</span> <span class="st">"qml"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">est_jordan_qml</span><span class="op">)</span></span></code></pre></div>
<p>Note: The other approaches work as well, but might be quite slow
depending on the number of interaction effects (particularly for the
LMS- and constrained approach).</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Kjell Solem Slupphaug.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
